@use "../../assets/scss/variable" as *;

.b-works {
  padding: 60px 0;

  &__grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 40px;
    align-items: flex-start;

    // @media (min-width: $breakpoint-md) {
    //   grid-template-columns: repeat(4, 1fr);
    // }
    @media (max-width: $breakpoint-md) {
      grid-template-columns: repeat(2, 1fr);
    }
    @media (max-width: $breakpoint-xs) {
      grid-template-columns: repeat(1, 1fr);
    }

    // // Warianty grida w zależności od liczby elementów
    // &--1 {
    //   @media (min-width: $breakpoint-md) {
    //     grid-template-columns: 1fr;
    //     justify-content: center;
    //   }
    // }

    // &--2 {
    //   @media (min-width: $breakpoint-md) {
    //     grid-template-columns: repeat(2, 1fr);
    //   }
    // }

    &--3 {
      grid-template-columns: repeat(3, 1fr);
      @media (max-width: $breakpoint-md) {
        grid-template-columns: repeat(3, 1fr);
      }
      @media (max-width: $breakpoint-sm) {
        grid-template-columns: repeat(1, 1fr);
        gap: 20px;
      }
      .b-works__item__arrowone {
        bottom: 20%;
        position: absolute;
        right: -40%;
      }
      .b-works__item__arrowtwo {
        position: absolute;
        right: -50%;
        @media (max-width: $breakpoint-md) {
          left: initial;
          right: -40%;
          bottom: initial;
          top: 0%;
          transform: rotate(0deg);
        }
      }
      .b-works__item__arrowtree {
        display: none;
      }
    }

    // &--4 {
    //   @media (min-width: $breakpoint-md) {
    //     grid-template-columns: repeat(4, 1fr);
    //   }
    // }

    // &--5,
    // &--6,
    // &--7,
    // &--8 {
    //   @media (min-width: $breakpoint-md) {
    //     grid-template-columns: repeat(4, 1fr);
    //   }
    // }
  }

  &__item {
    // position: relative;
    max-width: 280px;
    margin: 0 auto;

    // Connecting line between items (desktop only, 3-column layout)
    // &:not(:last-child)::after {
    //   content: "";
    //   position: absolute;
    //   height: 2px;
    //   width: calc(50% - 20px);
    //   left: calc(50% + 20px);
    //   top: 40px;
    //   border-top: 2px dashed rgba($color-primary, 0.3);
    //   pointer-events: none;
    //   z-index: 0;
    //   display: none;

    //   @media (min-width: $breakpoint-md) {
    //     display: block;
    //   }
    // }

    // Hide connecting line on last item in row (when grid wraps)
    &:nth-child(3n)::after {
      display: none;
    }
  }

  &__content {
    display: flex;
    flex-direction: column;
    gap: 24px;
    align-items: center;
    text-align: center;
    height: 100%;
    position: relative;
    z-index: 1;
  }

  &__header {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    margin-bottom: 8px;
  }

  &__icon {
    max-width: 80px;
    max-height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    position: relative;

    &-img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
  }

  &__number {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 56px;
    height: 56px;
    border-radius: 50%;
    color: $color-primary;
    font-family: "Indie Flower", sans-serif;
    font-weight: 700;
    font-size: 120px;
    line-height: 1;
    flex-shrink: 0;
    position: absolute;
    transform: translate(120%, -70%);
    // bottom: -8px;
    // right: 0;
    z-index: 2;
    opacity: 0.4;
    @media (max-width: $breakpoint-md) {
      transform: translate(100%, 0%);
    }
    @media (max-width: $breakpoint-sm) {
      font-size: 80px;
    }
    span {
      color: $color-primary;
    }
  }

  // position: absolute;
  // bottom: -50px;
  // right: -50px;
  // width: 100%;
  // height: 100%;
  svg {
    max-width: 80%;
    height: auto;
    @media (max-width: $breakpoint-sm) {
      display: none;
    }
  }

  &__item__arrowone {
    position: absolute;
    bottom: -40px;
    right: -40px;
    // width: 100%;
    // height: 100%;
    @media (max-width: $breakpoint-md) {
      bottom: 60%;
      right: -51%;
    }
  }
  &__item__arrowtwo {
    position: absolute;
    top: 0px;
    right: -100px;
    // width: 100%;
    // height: 100%;
    @media (max-width: $breakpoint-md) {
      top: initial;
      bottom: -30%;
      right: initial;
      left: -40%;
      transform: rotate(122deg);
    }
  }
  &__item__arrowtree {
    position: absolute;
    bottom: -20px;
    right: -100px;
    // width: 100%;
    // height: 100%;

    @media (max-width: $breakpoint-xxl) {
      right: -40px;
      bottom: -40px;
    }
    @media (max-width: $breakpoint-md) {
      bottom: 10%;
      right: initial;
      right: -40%;
      // transform: rotate(122deg);
    }
  }
  &__text {
    display: flex;
    flex-direction: column;
    gap: 16px;
    align-items: center;
    width: 100%;
    flex: 1;
    margin-top: 8px;
  }

  &__title {
    font-family: "Satoshi", sans-serif;
    font-weight: 700;
    font-size: 24px;
    line-height: 1.4;
    color: $color-text;
    margin: 0;
    width: 100%;
  }

  &__desc {
    font-family: "Satoshi", sans-serif;
    font-weight: 400;
    font-size: 16px;
    line-height: 1.6;
    color: rgba($color-text, 0.8);
    margin: 0;
    max-width: 100%;
  }

  // @media (max-width: $breakpoint-sm) {
  //   padding: 40px 0;

  //   &__grid {
  //     grid-template-columns: 1fr;
  //     gap: 32px;
  //   }

  //   &__item {
  //     // Hide connecting lines on mobile
  //     &::after {
  //       display: none !important;
  //     }
  //   }

  //   &__content {
  //     gap: 20px;
  //   }

  //   &__header {
  //     margin-bottom: 0;
  //   }

  //   &__number {
  //     position: absolute;
  //     bottom: -8px;
  //     right: calc(50% - 32px);
  //   }
  // }

  // @media (max-width: $breakpoint-sm) {
  //   padding: 32px 0;

  //   &__grid {
  //     gap: 40px;
  //   }

  //   &__title {
  //     font-size: 20px;
  //   }

  //   &__desc {
  //     font-size: 14px;
  //   }

  //   &__icon {
  //     width: 64px;
  //     height: 64px;
  //   }

  //   &__number {
  //     width: 48px;
  //     height: 48px;
  //     font-size: 20px;
  //   }
  // }
}

// Admin preview styles
.acf-block-preview {
  .b-works {
    border: 1px solid $color-primary;
    padding: 20px;
    width: 100%;
    left: initial;
    margin-left: initial;
    margin-top: 50px !important;
    &:before {
      content: "How it works";
      color: $color-background;
      padding: 3px 10px;
      font-size: 12px;
      background-color: $color-primary;
      position: absolute;
      top: 10px;
      right: 10px;
    }
    svg {
      display: none;
    }
    .b-works__number {
      font-size: 60px;
      transform: translate(120%, 0%);
    }
  }
}
